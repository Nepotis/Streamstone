skip_tags: true

version: 2.0.{build}

image: Ubuntu2004

init:
    - git config --global core.autocrlf input

before_build:
    - sudo wget -O - https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor | sudo tee /etc/apt/keyrings/microsoft.gpg
    - sudo gedit /etc/apt/sources.list.d/microsoft.sources

build_script:
    - git submodule init
    - git submodule update
    - cd Azurite
    - npm ci
    - npm run build
    - npm install -g
    - (exec azurite -l ~/.data &)
    - sleep 5
    - cd ..
    - dotnet tool restore
    - dotnet nake pack

artifacts:
- path: Artifacts\Release\*.nupkg
